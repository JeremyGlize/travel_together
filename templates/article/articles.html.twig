{% extends 'base.html.twig' %}
{% block body %}
    <section class="articles">
        {% if app.user %}
        <button class="button-article" ><a href="{{ path('article_new') }}">Ajouter un article</a></button>
            {% else %}
                <button class="button-article" ><a href="{{ path('app_login') }}">Connectez-vous pour ajouter un article</a></button>
        {% endif %}
        <div class="articles-container-listing">
            {% for article in articles %}
            <div class="articles-card-listing">
                <div class="articles-card-title">
                    <h3>{{ article.title|raw }}</h3>
                </div>
                <div class="articles-card-details">
{#                    <p>{{ article.content|u.truncate(150, '...', false)|raw }}</p>#}
{#                    <p>{{ article.content|striptags|slice(0, 180)|raw }}</p>#}
                    <p>{{ article.content|u.truncate(210, '...', false)|raw }}</p>
{#                    <p>{{ article.createdAt|date }}</p>#}
                    <p class="com"><i class="fa-solid fa-message"></i> {{ article.comments|length }}</p>
                </div>
                <div class="articles-card-button">
                    <button class="read-more">
                        <a href="{{ path('article_detail', {id: article.id}) }}">Lire plus</a>
                    </button>
                </div>
            </div>
            {% endfor %}
        </div>
    </section>
{% endblock%}
